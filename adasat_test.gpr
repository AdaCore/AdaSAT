with "adasat";

project AdaSAT_Test is
   type Build_Mode_Type is ("dev", "prod", "prof");
   Build_Mode : Build_Mode_Type :=
      external ("BUILD_MODE", external ("ADASAT_BUILD_MODE", "dev"));

   for Source_Dirs use ("tests");
   for Main use ("simple.adb", "sudoku.adb", "propositions.adb");
   for Exec_Dir use "bin";
   for Object_Dir use "obj";

   Common_Ada_Cargs := ("-gnatwa", "-gnatyg", "-fPIC", "-gnat2022");

   package Compiler is
      case Build_Mode is
         when "dev" =>
            for Default_Switches ("Ada") use
               Common_Ada_Cargs & ("-g", "-O0", "-gnatwe", "-gnata");

         when "prof" =>
            for Default_Switches ("Ada") use
               Common_Ada_Cargs
                 & ("-Og", "-ggdb", "-g3", "-fno-omit-frame-pointer");

         when "prod" =>
            for Default_Switches ("Ada") use
               Common_Ada_Cargs & ("-g", "-Ofast", "-gnatp", "-gnatn2");
      end case;
   end Compiler;
end AdaSAT_Test;
